{% extends 'teacher/base_teacher.html' %}
{% load static %}
{% block title %}Lesson Detail{% endblock %}

{% block content %}
<div class="max-w-screen-lg mx-auto p-6">
    <!-- Navigation and Heading -->
    <div class="flex items-center gap-2 mb-4">
        <button class="px-3 py-1 bg-gray-800 text-white rounded-full">&larr; Back</button>
        <h1 class="text-xl font-semibold">Lessons</h1>
    </div>

    <!-- Lesson Header -->
    <h1 class="text-2xl font-bold text-gray-800">Detail Lesson</h1>

    <!-- Flipbook Frame -->
    <div class="relative bg-black rounded-[20px] w-full h-[600px] overflow-hidden shadow-lg">
        <div class="absolute inset-4 bg-white rounded-[16px] grid grid-cols-2 overflow-hidden">
            <div class="relative flex items-end justify-center p-4 border-r border-gray-300">
                <p class="bg-gray-600 text-white text-sm px-4 py-2 rounded-md max-w-[90%] text-center shadow-lg">
                    ในป่าลึก มีเจ้ากบตัวหนึ่งชื่อ “ต๊อกแต๊ก” ที่ชอบเล่นน้ำทั้งวัน ไม่ชอบเรียนรู้เหมือนเพื่อนกบตัวอื่น
                </p>
            </div>
            <div class="relative flex items-end justify-center p-4">
                <p class="bg-gray-600 text-white text-sm px-4 py-2 rounded-md max-w-[90%] text-center shadow-lg">
                    วันหนึ่ง ครูเต่าประกาศว่าจะมีการแข่งขัน “กบน้อยนักประดิษฐ์” ต้องสร้างสะพานข้ามบ่อเพื่อนๆ
                    ต๊อกแต๊กก็นึกในใจว่า “ฉันจะโดดเข้าร่วมมันเอง!”
                </p>
            </div>
        </div>
    </div>

    <!-- Player Control -->
    <div class="flex items-center justify-between text-gray-600 text-sm mt-4">
        <button
            class="flex items-center justify-center w-10 h-10 rounded-full bg-white shadow hover:bg-gray-100 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-800" viewBox="0 0 24 24"
                fill="currentColor">
                <path d="M8 5v14l11-7z" />
            </svg>
        </button>
        <div class="flex items-center gap-3">
            <span class="text-gray-700 font-medium">01:00</span>
            <button
                class="flex items-center justify-center w-9 h-9 rounded-full bg-white shadow hover:bg-gray-100 transition"
                id="mute-btn">
                <svg id="icon-sound-on" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-800"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11 5L6 9H2v6h4l5 4V5z" />
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15.54 8.46a5 5 0 010 7.07M19.07 4.93a9 9 0 010 12.73" />
                </svg>
                <svg id="icon-sound-off" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-800 hidden"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 14M15 5l-7 14" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Comment Input + Star Rating -->
    <div class="mt-12 bg-gray-100 p-6 rounded-xl">
        <h3 class="text-xl font-semibold mb-4">Leave a Comment</h3>
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <!-- Comment Box -->
            <div class="flex-1 flex items-center border border-gray-300 rounded-lg px-4 py-2 bg-white shadow-sm">
                <input type="text" placeholder="Send your comment here..."
                    class="w-full text-sm text-gray-800 placeholder-gray-400 focus:outline-none" id="comment-input" />
                <button class="ml-2 bg-gray-800 hover:bg-gray-700 text-white p-2 rounded-md transition"
                    id="comment-submit">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" stroke="currentColor"
                        stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                    </svg>
                </button>
            </div>

            <!-- Rating -->
            <div class="flex items-center gap-1 text-yellow-400 text-xl mt-2 md:mt-0" id="star-rating">
                {% for i in "12345" %}
                <button class="hover:scale-110 transition text-gray-300"
                    data-star="{{ forloop.counter }}">&#9733;</button>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Comment List -->
    <div class="space-y-4 ">
        {% for i in "1234567" %}
        <div class="flex justify-between items-start bg-gray-50 hover:bg-gray-100 p-4 rounded-lg shadow-sm">
            <div class="flex items-start gap-3">
                <img src="{% static 'images/avatar.png' %}" alt="avatar" class="w-10 h-10 rounded-full object-cover">
                <div>
                    <p class="text-sm font-semibold text-gray-900">Michael Roberts <span
                            class="text-gray-500 font-normal">commented on your post</span></p>
                    <p class="text-sm text-gray-700 mt-1">Never underestimate the power of a story. Even the simplest
                        tale can carry deep morals</p>
                    <p class="text-xs text-gray-400 mt-1">08:56 PM on 31 October, 2024</p>
                </div>
            </div>
            <button class="text-gray-400 hover:text-gray-600 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6h.01M12 12h.01M12 18h.01" />
                </svg>
            </button>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const stars = document.querySelectorAll('#star-rating button');
        let currentRating = 0;

        stars.forEach(star => {
            star.addEventListener('click', () => {
                currentRating = parseInt(star.getAttribute('data-star'));
                updateStars(currentRating);
                console.log("Rated:", currentRating);
            });
        });

        function updateStars(rating) {
            stars.forEach(star => {
                const value = parseInt(star.getAttribute('data-star'));
                if (value <= rating) {
                    star.classList.remove('text-gray-300');
                    star.classList.add('text-yellow-400');
                } else {
                    star.classList.remove('text-yellow-400');
                    star.classList.add('text-gray-300');
                }
            });
        }

        document.getElementById('comment-submit').addEventListener('click', () => {
            const comment = document.getElementById('comment-input').value;
            if (!comment.trim()) return alert("Please enter a comment.");
            if (currentRating === 0) return alert("Please rate with stars.");
            console.log("Submitted Comment:", comment);
            console.log("Rating:", currentRating);
        });
    });
</script>
{% endblock %}